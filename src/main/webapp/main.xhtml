<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
    <title>Lab Work</title>
    <h:outputStylesheet name="/styles/main.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&amp;display=swap" rel="stylesheet"/>
</h:head>
<h:body>
    <div class="container">
        <div class="header">
            <h1>Coordinate Plane Checker</h1>
        </div>

        <div class="graph-container">
            <canvas id="graph" width="600" height="600">
            </canvas>

            <h:form styleClass="form-grid" onsubmit="return validateForm();">
                <div class="form-row">
                    <h:outputLabel for="x" value="X Coordinate:" styleClass="form-label"/>
                    <h:selectOneMenu id="x" value="#{inputBean.result.x}"
                                     required="true" styleClass="select-menu">
                        <f:selectItem itemLabel="Select X" itemValue=""/>
                        <f:selectItems value="#{[-3,-2,-1,0,1,2,3,4,5]}" var="val" itemLabel="#{val}"
                                       itemValue="#{val}"/>
                    </h:selectOneMenu>
                </div>

                <div class="form-row">
                    <h:outputLabel for="y" value="Y Coordinate:" styleClass="form-label"/>
                    <h:inputText id="y" value="#{inputBean.result.y}"
                                 required="true"
                                 styleClass="input-field">
                        <f:validateDoubleRange minimum="-3" maximum="5"/>
                    </h:inputText>
                    <h:message for="y" styleClass="error-message"/>
                </div>

                <div class="form-row">
                    <h:outputLabel for="r" value="Radius (R):" styleClass="form-label"/>
                    <h:selectOneMenu id="r" value="#{inputBean.result.r}"
                                     required="true" styleClass="select-menu"
                                     onchange="drawGraph()">
                        <f:selectItem itemLabel="Select R" itemValue=""/>
                        <f:selectItems value="#{[1,2,3,4,5]}" var="val" itemLabel="#{val}" itemValue="#{val}"/>
                    </h:selectOneMenu>
                </div>

                <div class="form-row">
                    <h:commandButton value="Check Point"
                                     action="#{inputBean.processInput}"
                                     styleClass="button"/>
                    <h:commandButton value="Clear History"
                                     action="#{resultBean.clearResults}"
                                     styleClass="button"/>
                </div>
            </h:form>
        </div>

        <h:form>
            <h:dataTable value="#{resultListBean.results}"
                         var="result"
                         styleClass="data-table">
                <h:column>
                    <f:facet name="header">X</f:facet>
                    <h:outputText value="#{result.x}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Y</f:facet>
                    <h:outputText value="#{result.y}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">R</f:facet>
                    <h:outputText value="#{result.r}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Hit</f:facet>
                    <h:outputText value="#{result.hit ? 'Yes' : 'No'}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">Actions</f:facet>
                    <h:commandButton value="Remove"
                                     action="#{resultBean.deleteResult(result.id)}"
                                     styleClass="button"/>
                </h:column>
            </h:dataTable>
        </h:form>

        <h:form>
            <h:commandButton value="Return to Index"
                             action="goToIndex"
                             styleClass="button"/>
        </h:form>
    </div>

    <h:outputScript name="js/graph.js"/>
</h:body>
</html>